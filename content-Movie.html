<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Info</title>
    <link rel="stylesheet" href="styles/style.css">
</head>
<body class="content-watch">
    <header class="header-nav">
        <nav class="nav">
            <ul class="nav__list">
                <li class="nav__item"><a href="./index.html" class="uno">Cine-Logo</a></li>
                <li class="nav__item"><a href="./index.html#peliculas">Películas</a></li>
                <li class="nav__item"><a href="./index.html#tv-shows">Tv Shows</a></li>
            </ul>
            <form action="" class="form">
                <label for="search">
                    <input type="search" id="search" class="form__search" placeholder="Busca tus gustos preferidos y disfruta">
                    Buscar
                </label>
            </form>
            <div class="account">
                <img src="" alt="img de la cuenta" width="48px" height="48px">
            </div>
        </nav>
    </header>
    <main class="main__content-info">
        <section class="section__infowatch">
            <article class="article__content-info">
                <figure>
                    <img src="" alt="Poster película">
                    <figcaption class="figure__ranking">
                        <ul>
                            <li>73%</li>
                            <li>Ciencia Ficcón</li>
                            <li>1H 59m</li>
                        </ul>
                    </figcaption>
                </figure>
                <header>
                    <h2></h2>
                    <span></span>
                </header>
                <ul class="article__generosList"></ul>
                <div class="article__about-content">
                    <p class="article__about-content"></p>
                    <button>Reproducir trailer</button>
                </div>
                <div class="article__actors"> Actores de:</div>
                <aside class="article__about-film">
                    <h2>Director <span></span></h2>
                    <h3>Escritores <span></span></h3>
                </aside>
            </article>
        </section>
    </main>
    <script type="module">
        import {APIKEY} from "./src/secret.js";

        const imgUrl = sessionStorage.getItem('pictureUrl');
        const textImg = sessionStorage.getItem('pictureText');
        const idfilm = sessionStorage.getItem("idwatch");
        const mediaType = sessionStorage.getItem("media");

        const headerTitle = document.querySelector("header > h2");
        const taglineTitle = document.querySelector("header > span");
        const imgPoster = document.querySelector("figure > img");
        const detailParagraph = document.querySelector(".article__about-content > p");
        const listGeners = document.querySelector(".article__generosList");



        async function idFilmDeatails(watch, id){
            const res = await fetch(`https://api.themoviedb.org/3/${watch}/${id}?api_key=${APIKEY}&language=es-MX`);
            const data = await res.json();
            data?.genres.forEach(element => {
                const itemsList = document.createElement("li");
                itemsList.textContent = element?.name;
                listGeners.insertAdjacentElement("beforeend", itemsList);
            });
            console.log(data);
            detailParagraph.textContent = data?.overview || /*html*/`Lorem ipsum dolor sit amet consectetur adipisicing elit. Magni autem ipsum nostrum culpa pariatur accusantium at blanditiis sequi molestias aliquam.`;
            taglineTitle.textContent = data?.tagline;
        }

        headerTitle.textContent = textImg;
        imgPoster.src = imgUrl;
        imgPoster.alt = textImg;
        idFilmDeatails(mediaType, idfilm);

    </script>

</body>

</html>
